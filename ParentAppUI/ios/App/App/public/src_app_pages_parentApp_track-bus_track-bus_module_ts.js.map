{"version":3,"file":"src_app_pages_parentApp_track-bus_track-bus_module_ts.js","mappings":"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ACPI,yDAAY,EACZL,4EAAqB,EACrBM,uDAAW,EACXE,uDAAW,EACXD,+DAAmB;CAEtB,CAAC,GACWE,cAAc,CAAI;;;;;;;;;;;ACpB/B;AACA,4CAA4C,mBAAO,CAAC,iFAAsE;AAC1H,kCAAkC,mBAAO,CAAC,0EAA+D;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,OAAO,2HAA2H,UAAU,UAAU,WAAW,UAAU,WAAW,MAAM,KAAK,UAAU,MAAM,KAAK,WAAW,YAAY,WAAW,gCAAgC,4BAA4B,mBAAmB,kBAAkB,oCAAoC,iBAAiB,wCAAwC,KAAK,sBAAsB,iBAAiB,KAAK,qBAAqB,0BAA0B,oBAAoB,aAAa,KAAK,mBAAmB;AAChlB;AACA;;;;;;;;;;;ACvBA;AACA,4CAA4C,mBAAO,CAAC,8EAAmE;AACvH,kCAAkC,mBAAO,CAAC,uEAA4D;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC,OAAO,6HAA6H,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,MAAM,KAAK,UAAU,KAAK,KAAK,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,WAAW,WAAW,KAAK,KAAK,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,WAAW,MAAM,KAAK,UAAU,WAAW,WAAW,UAAU,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,MAAM,KAAK,UAAU,WAAW,WAAW,UAAU,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,MAAM,KAAK,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,KAAK,KAAK,WAAW,UAAU,UAAU,KAAK,KAAK,UAAU,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,KAAK,KAAK,UAAU,UAAU,WAAW,WAAW,MAAM,KAAK,WAAW,MAAM,KAAK,WAAW,UAAU,qCAAqC,mBAAmB,sCAAsC,kCAAkC,oCAAoC,kCAAkC,yBAAyB,0BAA0B,GAAG,uBAAuB,sBAAsB,gBAAgB,6BAA6B,2BAA2B,2BAA2B,6BAA6B,+BAA+B,0CAA0C,sCAAsC,gDAAgD,8CAA8C,4CAA4C,+BAA+B,6BAA6B,qCAAqC,0CAA0C,kDAAkD,SAAS,mBAAmB,4CAA4C,iCAAiC,wCAAwC,yCAAyC,qCAAqC,iCAAiC,4BAA4B,2CAA2C,uBAAuB,WAAW,SAAS,mBAAmB,8BAA8B,iCAAiC,gCAAgC,SAAS,oBAAoB,4CAA4C,kDAAkD,gDAAgD,8CAA8C,iCAAiC,wCAAwC,yCAAyC,6BAA6B,qCAAqC,wBAAwB,yDAAyD,WAAW,SAAS,gCAAgC,uDAAuD,SAAS,qCAAqC,qBAAqB,2CAA2C,WAAW,SAAS,OAAO,4BAA4B,0CAA0C,OAAO,KAAK,+BAA+B,kBAAkB,wBAAwB,yBAAyB,sBAAsB,mBAAmB,4BAA4B,0BAA0B,uBAAuB,yBAAyB,6CAA6C,wCAAwC,0CAA0C,2CAA2C,sBAAsB,KAAK,0BAA0B,kBAAkB,wBAAwB,yBAAyB,sBAAsB,mBAAmB,4BAA4B,uBAAuB,yBAAyB,6CAA6C,8DAA8D,oCAAoC,KAAK,uBAAuB,uBAAuB,8FAA8F,wCAAwC,uEAAuE,kCAAkC,mCAAmC,sBAAsB,kBAAkB,oBAAoB,8BAA8B,6BAA6B,0BAA0B,mBAAmB,yBAAyB,UAAU,kCAAkC,wBAAwB,uBAAuB,OAAO,uBAAuB,qBAAqB,sBAAsB,2BAA2B,2BAA2B,4BAA4B,+BAA+B,+BAA+B,sBAAsB,4BAA4B,gCAAgC,iBAAiB,sBAAsB,0BAA0B,2BAA2B,6BAA6B,SAAS,OAAO,KAAK,qBAAqB,0DAA0D,KAAK,oBAAoB,0CAA0C,oBAAoB,GAAG,mBAAmB;AACt+K;AACA","sources":["./src/app/pages/parentApp/track-bus/map/map.component.ts","./src/app/pages/parentApp/track-bus/track-bus-routing.module.ts","./src/app/pages/parentApp/track-bus/track-bus.component.ts","./src/app/pages/parentApp/track-bus/track-bus.module.ts","./src/app/pages/parentApp/track-bus/map/map.component.scss","./src/app/pages/parentApp/track-bus/track-bus.component.scss"],"sourcesContent":["import { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild, inject } from '@angular/core';\nimport { ParentAppServiceProxy } from 'src/app/services/school-api-service';\nimport { UserService } from 'src/app/services/user-service';\n\n\ndeclare var google: any;\ninterface Coordinates {\n  lat: string;\n  lng: string;\n}\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.scss']\n})\nexport class MapComponent implements OnInit, OnDestroy {\n  directionsService: any;\n  directionsRenderer: any;\n  busMarker: any;\n  @ViewChild('map', {static: true}) mapElementRef!: ElementRef;\n  // Coordinates for the bus route (start, stoppages, end)\n  busRouteCoordinates : Coordinates[] = [];\n  map: any;\n  private renderer = inject(Renderer2);\n  busInterval: any;\n  noActiveTrip : boolean = false;\n  constructor(private parentAppService : ParentAppServiceProxy, private userService: UserService,) { }\n\n  ngOnInit() {\n    this.getData();\n    \n  }\n\n\n async getData(){\n\n  this.parentAppService.getVehicleTrackListSelect(this.userService.CurrentSiblingId).subscribe(x=>{\n    if(x.vehicleTrackList && x.vehicleTrackList.length > 0){\n      this.parentAppService.getStoppageTrackListSelect(this.userService.CurrentSiblingId).subscribe(async x=>{\n        if(x.stoppageTrackList && x.stoppageTrackList.length > 1){\n          x.stoppageTrackList.forEach(element => {\n            this.busRouteCoordinates.push({lat : element.lat, lng:element.lng!});\n          });\n         await  this.loadMap();\n         this.trackBus();\n        }\n        else{\n          this.noActiveTrip = true;\n        }\n      })\n    }\n    else{\n      this.noActiveTrip = true;\n    }\n  })\n\n\n   \n  }\n\n  async loadMap() {\n    const { Map } = await google.maps.importLibrary(\"maps\");\n\n    const mapEl = this.mapElementRef.nativeElement;\n\n    const location = new google.maps.LatLng(this.busRouteCoordinates[0].lat, this.busRouteCoordinates[0].lng);\n\n    this.map = new Map(mapEl, {\n      center: location,\n      zoom: 14,\n      mapId: \"4504f8b37365c3d0\"\n    });\n\n    this.renderer.addClass(mapEl, 'visible');\n\n    const markerIcon = document.createElement('img');\n    markerIcon.src = 'assets/icons/bus.png';\n    markerIcon.height = 50;\n    markerIcon.width = 50;\n   \n\n    this.addMarker(location,markerIcon);\n    this.directionsService = new google.maps.DirectionsService();\n    this.directionsRenderer = new google.maps.DirectionsRenderer();\n    this.directionsRenderer.setMap(this.map);\n    this.trackBus(); //18.601468, 73.779327\n\n    this.calculateAndDisplayRoute();\n  }\n\n\n  async addMarker(location: any,markerIcon:HTMLImageElement) {\n\n    const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary(\"marker\");\n\n   \n\n    this.busMarker = new AdvancedMarkerElement({\n      map: this.map,\n      position: location,\n      gmpDraggable: true,\n      content: markerIcon,\n      title: 'Bus'\n    });\n\n\n  }\n\n  calculateAndDisplayRoute() {\n    const waypoints = this.busRouteCoordinates.slice(1, -1).map(location => {\n      return {\n        location: new google.maps.LatLng(location.lat, location.lng),\n        stopover: true,\n      };\n    });\n\n    this.directionsService.route(\n      {\n        origin: new google.maps.LatLng(\n          this.busRouteCoordinates[0].lat,\n          this.busRouteCoordinates[0].lng\n        ),\n        destination: new google.maps.LatLng(\n          this.busRouteCoordinates[this.busRouteCoordinates.length - 1].lat,\n          this.busRouteCoordinates[this.busRouteCoordinates.length - 1].lng\n        ),\n        waypoints: waypoints,\n        optimizeWaypoints: true,\n        travelMode: google.maps.TravelMode.DRIVING,\n      },\n      (response, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          this.directionsRenderer.setDirections(response);\n        } else {\n          console.error('Directions request failed due to ' + status);\n        }\n      }\n    );\n  }\n\n\n  trackBus() {\n    // Simulating live updates - replace this with real data\n    this.busInterval = setInterval(() => {\n      // Fetch the new bus position from your backend (example is simulated)\n      // Ensure the marker is defined before updating its position\n      if (this.busMarker) {\n        this.parentAppService.getVehicleTrackListSelect(this.userService.CurrentSiblingId).subscribe(x=>{\n          if(x.vehicleTrackList && x.vehicleTrackList.length > 0){\n            this.busMarker.position = new google.maps.LatLng(x.vehicleTrackList[0].lat, x.vehicleTrackList[0].lng);\n            // Optionally, pan the map to the new position\n            this.map.panTo(new google.maps.LatLng(x.vehicleTrackList[0].lat, x.vehicleTrackList[0].lng));\n            this.noActiveTrip = false;\n          }\n          else{\n            this.noActiveTrip = true;\n          }\n        })\n      } else {\n        console.error('Bus marker is not properly initialized');\n      }\n    }, 5000); // Update every 5 seconds\n  }\n\n  ionViewDidEnter() {\n    this.clearAllMapRelatedObject();\n    this.getData();\n    this.trackBus();\n  }\n\n  ionicViewWillLeave(){\n    this.clearAllMapRelatedObject();\n  }\n\n  \n\n  ngOnDestroy(): void {\n    this.clearAllMapRelatedObject();\n  }\n\n  clearAllMapRelatedObject():void{\n    if (this.map) {\n      google.maps.event.clearInstanceListeners(this.map);\n      this.map = null;\n    }\n    if (this.busInterval) {\n      clearInterval(this.busInterval);\n    }\n  }\n  \n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { TrackBusComponent } from './track-bus.component';\n\nconst routes: Routes = [\n  {path:'', component:TrackBusComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TrackBusRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\n@Component({\n  selector: 'app-parents',\n  templateUrl: './track-bus.component.html',\n  styleUrl: './track-bus.component.scss'\n})\nexport class TrackBusComponent implements OnInit {\n \n  constructor() {}\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    \n  }\n\n\n}\n","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { TrackBusRoutingModule } from './track-bus-routing.module';\nimport { TrackBusComponent } from './track-bus.component';\nimport { MapComponent } from './map/map.component';\n\n\n@NgModule({\n  declarations: [TrackBusComponent,MapComponent],\n  imports: [\n    CommonModule,\n    TrackBusRoutingModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n  ]\n})\nexport class TrackBusModule { }\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.map {\n  height: 100%;\n  width: 100%;\n  background-color: transparent;\n  opacity: 0;\n  transition: opacity 150ms ease-in;\n}\n\n.map.visible {\n  opacity: 1;\n}\n\n.no-active-bus {\n  text-align: center;\n  padding-top: 100px;\n  color: black;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/pages/parentApp/track-bus/map/map.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EAEI,YAAA;EACA,WAAA;EACA,6BAAA;EACA,UAAA;EACA,iCAAA;AAAJ;;AAGE;EACE,UAAA;AAAJ;;AAGE;EACE,kBAAA;EAAoB,kBAAA;EAAoB,YAAA;AAE5C\",\"sourcesContent\":[\".map {\\n    // position: absolute;\\n    height: 100%;\\n    width: 100%;\\n    background-color: transparent;\\n    opacity: 0;\\n    transition: opacity 150ms ease-in;\\n  }\\n  \\n  .map.visible {\\n    opacity: 1;\\n  }\\n\\n  .no-active-bus{\\n    text-align: center; padding-top: 100px; color: black;\\n  }\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `ion-list {\n  padding-top: 0;\n  background-color: #fff !important;\n  --background: #fff !important;\n  --border-radius: 0px !important;\n  border-radius: 0px !important;\n  border: 0 !important;\n  --border:0 !important;\n}\n\n.form-default {\n  margin-top: 0px;\n}\n.form-default ion-item {\n  --border-radius: 0px;\n  border-radius: 0px;\n  margin-bottom: 0px;\n  --padding-start: 0px;\n  --inner-padding-end: 0;\n  background-color: #fff !important;\n  --background: #fff !important;\n  --background-activated: #fff !important;\n  --background-focused: #fff !important;\n  --background-hover: #fff !important;\n  --border: 0 !important;\n  border: 0 !important;\n  --highlight: #fff !important;\n}\n.form-default ion-item.item-interactive.ion-valid {\n  --highlight-background: #fff !important;\n}\n.form-default ion-item ion-input {\n  background-color: #fff !important;\n  border: 1px solid #ccc;\n  padding-left: 10px !important;\n  border-radius: 40px !important;\n  font-size: 13px !important;\n  color: #000 !important;\n}\n.form-default ion-item ion-input.input-disabled {\n  background: #ededf0 !important;\n  opacity: 1;\n}\n.form-default ion-item ion-label {\n  margin-bottom: 10px;\n  color: #000 !important;\n  opacity: 1 !important;\n}\n.form-default ion-item ion-select {\n  background-color: #fff !important;\n  --background-activated: #fff !important;\n  --background-focused: #fff !important;\n  --background-hover: #fff !important;\n  border: 1px solid #ccc;\n  padding-left: 10px !important;\n  border-radius: 40px !important;\n  min-height: 41.6px;\n  font-size: 13px !important;\n}\n.form-default ion-item ion-select .select-icon {\n  transform: translate3d(0, 0px, 0) !important;\n}\n.form-default ion-item ion-select::part(icon) {\n  transform: translate3d(0, 0px, 0) !important;\n}\n.form-default ion-item.item-interactive-disabled ion-input {\n  background: #ededf0 !important;\n}\n.form-default .label-floating {\n  max-width: -moz-fit-content !important;\n  max-width: fit-content !important;\n}\n\n.ion-button-small {\n  width: 100%;\n  padding-left: 0px;\n  padding-right: 0px;\n  font-size: 16px;\n  height: 40px;\n  --border-radius: 50px;\n  border-radius: 50px;\n  margin-top: 15px;\n  --box-shadow: none;\n  border: 1px solid #fff !important;\n  --border: 1px solid #fff !important;\n  --background: transparent !important;\n  --color: #fff;\n}\n\n.submit-form-btn {\n  width: 100%;\n  padding-left: 0px;\n  padding-right: 0px;\n  font-size: 16px;\n  height: 40px;\n  --border-radius: 50px;\n  margin-top: 15px;\n  --box-shadow: none;\n  --background: linear-gradient(135deg, #da8e63, #c754aa);\n  --color: var(--white-color);\n}\n\n.profile-card {\n  border-radius: 0;\n  background: var(--white-bg-color);\n  background-image: url('profile-bg.png');\n  background-position: center;\n  background-repeat: no-repeat;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  padding: 0px;\n  text-align: center;\n}\n.profile-card h1 {\n  color: var(--black-color);\n  font-size: 16px;\n  margin: 10px 0;\n}\n.profile-card .profile-photos {\n  width: 128px;\n  height: 128px;\n  border-radius: 50%;\n  text-align: center;\n  margin: 0 auto 10px;\n  background-color: #fff;\n  border: 1px solid #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.profile-card .profile-photos img {\n  width: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  border-radius: 50%;\n}\n\nion-toolbar {\n  background-color: var(--ion-color-primary-contrast);\n}\n\n.custom-error {\n  color: var(--highlight-color-invalid);\n  font-size: 12px;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/pages/parentApp/track-bus/track-bus.component.scss\"],\"names\":[],\"mappings\":\"AACA;EACE,cAAA;EACA,iCAAA;EACA,6BAAA;EACA,+BAAA;EACA,6BAAA;EACA,oBAAA;EACA,qBAAA;AAAF;;AAGE;EACE,eAAA;AAAJ;AACI;EACE,oBAAA;EACA,kBAAA;EACA,kBAAA;EACA,oBAAA;EACA,sBAAA;EACA,iCAAA;EACA,6BAAA;EACA,uCAAA;EACA,qCAAA;EACA,mCAAA;EACA,sBAAA;EACA,oBAAA;EACA,4BAAA;AACN;AACM;EACE,uCAAA;AACR;AACM;EACE,iCAAA;EACA,sBAAA;EACA,6BAAA;EACA,8BAAA;EACA,0BAAA;EACA,sBAAA;AACR;AAAQ;EACE,8BAAA;EACA,UAAA;AAEV;AACM;EACE,mBAAA;EACA,sBAAA;EACA,qBAAA;AACR;AACM;EACE,iCAAA;EACA,uCAAA;EACA,qCAAA;EACA,mCAAA;EACA,sBAAA;EACA,6BAAA;EACA,8BAAA;EACA,kBAAA;EACA,0BAAA;AACR;AAAQ;EACE,4CAAA;AAEV;AACM;EACE,4CAAA;AACR;AAEQ;EACE,8BAAA;AAAV;AAKI;EACE,sCAAA;EAAA,iCAAA;AAHN;;AASE;EACE,WAAA;EACA,iBAAA;EACA,kBAAA;EACA,eAAA;EACA,YAAA;EACA,qBAAA;EACA,mBAAA;EACA,gBAAA;EACA,kBAAA;EAEA,iCAAA;EACA,mCAAA;EACA,oCAAA;EACE,aAAA;AAPN;;AAUE;EACE,WAAA;EACA,iBAAA;EACA,kBAAA;EACA,eAAA;EACA,YAAA;EACA,qBAAA;EACA,gBAAA;EACA,kBAAA;EAEA,uDAAA;EACE,2BAAA;AARN;;AAWE;EACE,gBAAA;EAEA,iCAAA;EACA,uCAAA;EACA,2BAAA;EACA,4BAAA;EAEA,WAAA;EACA,aAAA;EACA,uBAAA;EACA,sBAAA;EACA,mBAAA;EACA,YAAA;EACA,kBAAA;AAVJ;AAWI;EACE,yBAAA;EACA,eAAA;EACA,cAAA;AATN;AAWI;EACE,YAAA;EACA,aAAA;EACA,kBAAA;EACA,kBAAA;EACA,mBAAA;EACA,sBAAA;EACA,sBAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;AATN;AAWM;EACE,WAAA;EACA,eAAA;EACA,gBAAA;EACA,kBAAA;AATR;;AAcE;EACE,mDAAA;AAXJ;;AAcA;EACE,qCAAA;EACA,eAAA;AAXF\",\"sourcesContent\":[\"\\nion-list {\\n  padding-top: 0;\\n  background-color: #fff !important;\\n  --background: #fff !important;\\n  --border-radius: 0px !important;\\n  border-radius: 0px !important;\\n  border: 0 !important;\\n  --border:0 !important;\\n}\\n  \\n  .form-default {\\n    margin-top: 0px;\\n    ion-item {\\n      --border-radius: 0px;\\n      border-radius: 0px;\\n      margin-bottom: 0px;\\n      --padding-start: 0px;\\n      --inner-padding-end: 0;\\n      background-color: #fff !important;\\n      --background: #fff !important;\\n      --background-activated: #fff !important;\\n      --background-focused: #fff !important;\\n      --background-hover: #fff !important;\\n      --border: 0 !important;\\n      border: 0 !important;\\n      --highlight: #fff !important;\\n  \\n      &.item-interactive.ion-valid {\\n        --highlight-background: #fff !important;\\n      }\\n      ion-input {\\n        background-color: #fff !important;\\n        border: 1px solid #ccc;\\n        padding-left: 10px !important;\\n        border-radius: 40px !important;\\n        font-size: 13px !important;\\n        color: #000 !important;\\n        &.input-disabled {\\n          background: #ededf0 !important;\\n          opacity: 1;\\n        }\\n      }\\n      ion-label {\\n        margin-bottom: 10px;\\n        color: #000 !important;\\n        opacity: 1 !important;\\n      }\\n      ion-select {\\n        background-color: #fff !important;\\n        --background-activated: #fff !important;\\n        --background-focused: #fff !important;\\n        --background-hover: #fff !important;\\n        border: 1px solid #ccc;\\n        padding-left: 10px !important;\\n        border-radius: 40px !important;\\n        min-height: 41.6px;\\n        font-size: 13px !important;\\n        .select-icon {\\n          transform: translate3d(0, 0px, 0) !important;\\n        }\\n      }\\n      ion-select::part(icon) {\\n        transform: translate3d(0, 0px, 0) !important;\\n      }\\n      &.item-interactive-disabled {\\n        ion-input {\\n          background: #ededf0 !important;\\n        }\\n      }\\n    }\\n   \\n    .label-floating {\\n      max-width: fit-content !important;\\n    }\\n  }\\n\\n\\n  \\n  .ion-button-small {\\n    width: 100%;\\n    padding-left: 0px;\\n    padding-right: 0px;\\n    font-size: 16px;\\n    height: 40px;\\n    --border-radius: 50px;\\n    border-radius: 50px;\\n    margin-top: 15px;\\n    --box-shadow: none;\\n    //--background: var(--orange-bg-color);\\n    border: 1px solid #fff !important;\\n    --border: 1px solid #fff !important;\\n    --background: transparent !important;\\n      --color: #fff;\\n  }\\n  \\n  .submit-form-btn {\\n    width: 100%;\\n    padding-left: 0px;\\n    padding-right: 0px;\\n    font-size: 16px;\\n    height: 40px;\\n    --border-radius: 50px;\\n    margin-top: 15px;\\n    --box-shadow: none;\\n    //--background: var(--orange-bg-color);\\n    --background: linear-gradient(135deg, #da8e63, #c754aa);\\n      --color: var(--white-color);\\n  }\\n  \\n  .profile-card {\\n    border-radius: 0;\\n    // background: linear-gradient(135deg, var(--ion-color-dark), var(--ion-color-primary));\\n    background: var(--white-bg-color);\\n    background-image: url(\\\"../../../../assets/img/profile-bg.png\\\");\\n    background-position: center;\\n    background-repeat: no-repeat;\\n    //height: 165px;\\n    width: 100%;\\n    display: flex;\\n    justify-content: center;\\n    flex-direction: column;\\n    align-items: center;\\n    padding: 0px;\\n    text-align: center;\\n    h1 {\\n      color: var(--black-color);\\n      font-size: 16px;\\n      margin: 10px 0;\\n    }\\n    .profile-photos {\\n      width: 128px;\\n      height: 128px;\\n      border-radius: 50%;\\n      text-align: center;\\n      margin: 0 auto 10px;\\n      background-color: #fff;\\n      border: 1px solid #fff;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n  \\n      img {\\n        width: 100%;\\n        max-width: 100%;\\n        max-height: 100%;\\n        border-radius: 50%;\\n      }\\n    }\\n  }\\n  \\n  ion-toolbar {\\n    background-color: var(--ion-color-primary-contrast);\\n  }\\n  \\n.custom-error{\\n  color: var(--highlight-color-invalid);\\n  font-size: 12px;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["Component","Renderer2","ViewChild","inject","ParentAppServiceProxy","UserService","MapComponent","constructor","parentAppService","userService","busRouteCoordinates","renderer","noActiveTrip","ngOnInit","getData","_this","_asyncToGenerator","getVehicleTrackListSelect","CurrentSiblingId","subscribe","x","vehicleTrackList","length","getStoppageTrackListSelect","_ref","stoppageTrackList","forEach","element","push","lat","lng","loadMap","trackBus","_x","apply","arguments","_this2","Map","google","maps","importLibrary","mapEl","mapElementRef","nativeElement","location","LatLng","map","center","zoom","mapId","addClass","markerIcon","document","createElement","src","height","width","addMarker","directionsService","DirectionsService","directionsRenderer","DirectionsRenderer","setMap","calculateAndDisplayRoute","_this3","AdvancedMarkerElement","PinElement","busMarker","position","gmpDraggable","content","title","waypoints","slice","stopover","route","origin","destination","optimizeWaypoints","travelMode","TravelMode","DRIVING","response","status","DirectionsStatus","OK","setDirections","console","error","busInterval","setInterval","panTo","ionViewDidEnter","clearAllMapRelatedObject","ionicViewWillLeave","ngOnDestroy","event","clearInstanceListeners","clearInterval","_","args","static","__decorate","selector","template","__NG_CLI_RESOURCE__0","NgModule","RouterModule","TrackBusComponent","routes","path","component","TrackBusRoutingModule","imports","forChild","exports","ngAfterViewInit","CommonModule","FormsModule","ReactiveFormsModule","IonicModule","TrackBusModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}